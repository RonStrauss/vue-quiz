<script setup lang="ts">
import { computed, ref } from 'vue'
import FirstPage from './components/FirstPage.vue'
import SecondPage from './components/SecondPage.vue'
import ThirdPage from './components/ThirdPage.vue'
import FourthPage from './components/FourthPage.vue'
import FifthPage from './components/FifthPage.vue'

const currentPage = ref<'0' | '1' | '2' | '3' | '4'>('0')

function handleChangePage(newPage: typeof currentPage.value) {
  currentPage.value = newPage
}

const isDevelopment = import.meta.env.VITE_DEVELOPMENT === 'true'

const title = computed(() => {
  switch (currentPage.value) {
    case '0':
      return 'SaaS Platformania'
    case '1':
      return 'SaaS Platform mish-mash'
    case '2':
      return ' 砖砖转'
    case '3':
      return ' 专注转'
    default:
      return '爪转!'
  }
})

const instructions = computed(() => {
  switch (currentPage.value) {
    case '0':
      return ''
    case '1':
      return `   拽 转 砖转祝 驻注 爪注  拽. 转 注专 转 专 砖. 拽 转 专 爪转 拽转
    转  注专砖.`
    case '2':
      return ` 注专   转爪专 拽  4 住驻专转, 砖转 转 转转 转 砖.
  砖转砖 驻 注专 砖 砖拽转.
 转爪专 注, 砖专转 拽爪转爪爪注.`
    case '3':
      return `   驻注 转 住转专.
注砖 专 转 住转专注`
    default:
      return `驻砖 转 专转 转转 砖专爪 `
  }
})
</script>

<template>
  <header>
    <h1 class="title">{{ title }}</h1>
    <h3 class="instructions">{{ instructions }}</h3>
  </header>

  <main dir="rtl">
    <FirstPage v-if="currentPage === '0'" @change-page="handleChangePage" />
    <SecondPage v-else-if="currentPage === '1'" @change-page="handleChangePage" />
    <ThirdPage v-else-if="currentPage === '2'" @change-page="handleChangePage" />
    <FourthPage v-else-if="currentPage === '3'" @change-page="handleChangePage" />
    <FifthPage v-else-if="currentPage === '4'" />
    <template v-if="isDevelopment">
      <button @click="() => handleChangePage('1')">SecondPage</button>
      <button @click="() => handleChangePage('2')">ThirdPage</button>
      <button @click="() => handleChangePage('3')">FourthPage</button>
      <button @click="() => handleChangePage('4')">FifthPage</button>
    </template>
  </main>
</template>

<style scoped>
header {
  text-align: center;
  direction: rtl;
  text-wrap: balance;
}
main {
  display: grid;
  place-items: center;
  flex: 1;
}

.title {
  font-size: x-large;
}
</style>
